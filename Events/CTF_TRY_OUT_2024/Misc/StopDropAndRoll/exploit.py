from pwn import *

# Connect to the remote server
connection = remote('xx.xxx.xx.xxx', 00000)

# Wait for the prompt to begin
connection.recvuntil(b'(y/n) ')
connection.sendline(b'y')  # Start the game
connection.recvuntil(b'\n')  # Skip the initial line

attempt_count = 0  # Keep track of how many attempts we've made

while True:
    try:
        # Receive the scenario from the server
        incoming = connection.recvline().decode().strip()

        # Translate the scenario into the corresponding actions
        response = incoming.replace(", ", "-").replace("GORGE", "STOP").replace("PHREAK", "DROP").replace("FIRE", "ROLL")

        # Send the response back to the server
        connection.sendlineafter(b'What do you do?', response.encode())

        # Update attempt count and log the response
        attempt_count += 1
        log.info(f'Attempt {attempt_count}: Responded with "{response}"')

    except EOFError:
        # If the connection closes, log the final message and exit the loop
        log.success(f'Final message: "{incoming}"')
        connection.close()
        break
