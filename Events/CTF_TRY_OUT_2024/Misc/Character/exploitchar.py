import socket

def get_flag(ip, port, max_index):
    flag = ""

    for index in range(max_index + 1):
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
                s.connect((ip, port))

                s.recv(1024)  # Initial prompt
                s.sendall(f"{index}\n".encode())
                response = s.recv(1024).decode()

                if "Character at Index" in response:
                    flag += response.split(": ")[-1].strip()
                else:
                    break
        except Exception as e:
            print(f"Error at index {index}: {e}")
            break

    return flag

if __name__ == "__main__":
    IP = "xx.xxx.xx.xx"
    PORT = "xxxxx"
    MAX_INDEX = "xxx"

    print(get_flag(IP, PORT, MAX_INDEX))
